<!-- <div>
  {{appState$ | async | json }}
</div> -->

<div class="container-xl">
  <div class="table-responsive" style="overflow: hidden;">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row my-5">
          <div class="col-sm-6">
            <h2>Manage Servers</h2>
          </div>
          <div class="col-sm-6 d-flex flex-row-reverse">
            <button class="btn btn-primary m-2" type="button">Print Report</button>

            <button type="button" class="btn btn-success m-2" data-toggle="modal" data-target="#addServerModal">
              <i class="material-icon mx-2">&#xE147;</i>
              <span>New Server</span>
            </button>
            <select name="status" id="status" class="btn btn-info m-2">
              <option value="ALL">ALL</option>
              <option value="UP">SERVER UP</option>
              <option value="DOWN">SERVER DOWN</option>
            </select>
          </div>
        </div>
      </div>
      <br>
      <ng-container *ngIf="(appState$ | async) as appState" [ngSwitch]="appState.dataState">
        <ng-container *ngSwitchCase="DataState.LOADING_STATE">
          <div class="col-md-12 row justify-content-center m-4 single-note-item text-container">
            <div class="spinner-border text-info" role="status"></div>
          </div>
        </ng-container>
        <ng-container *ngSwitchCase="DataState.LOADED_STATE">
          <table class="table table-striped table-hover" id="servers">
            <thead>
              <tr>
                <th>Images</th>
                <th>IP Address</th>
                <th>Name</th>
                <th>Memory</th>
                <th>Type</th>
                <th>Status</th>
                <th>Ping</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody *ngFor="let server of appState.appData.data.servers; let i = index">
              <tr>
                <td><img [src]="server.imageUrl" [alt]="server.name" width="40" height="40"></td>
                <td>{{ server.ipAddress }}</td>
                <td>{{ server.name }}</td>
                <td>{{ server.memory }}</td>
                <td>{{ ServerType[server.type] }}</td>
                <td>
                  <span class="badge" [ngClass]="[server.status === Status.UP ? 'badge-success' : 'badge-danger']" style="width: 75%; height: 20px;">
                    {{ server.status }}
                  </span>
                </td>
                <td>
                  <a style="cursor: pointor;">
                    <img src="./../assets/images/ping.png" alt="Ping" width="30" height="30">
                  </a>
                </td>
                <td>{{ "Delete" }}</td>
              </tr>
            </tbody>
          </table>
        </ng-container>
        <ng-container *ngSwitchCase="DataState.ERROR_STATE">
          <div class="alert-danger">
            error
          </div>
        </ng-container>
      </ng-container>
    </div>
  </div>
</div>


<div class="modal fade" id="addServerModal" tabindex="-1" role="dialog" aria-labelledby="addServerModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addServerModalLabel">Add server</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body p-3">
        <form>
          <div class="form-group">
            <label for="ip-address" class="col-form-label">IP Address:</label>
            <input type="text" class="form-control" id="ip-address">
          </div>
          <div class="form-group">
            <label for="name" class="col-form-label">Name:</label>
            <input type="text" class="form-control" id="name">
          </div>
          <div class="form-group">
            <label for="ram" class="col-form-label">Ram:</label>
            <input type="text" class="form-control" id="ram">
          </div>
          <div class="form-group">
            <label for="storage" class="col-form-label">Storage:</label>
            <input type="text" class="form-control" id="storage">
          </div>
          <div class="form-group">
            <label for="type" class="col-form-label">Type:</label>
            <select class="form-control form-select form-select-lg mb-3" id="type" aria-label=".form-select-lg">
              <option selected>Select Type</option>
              <option value="SERVER">SERVER</option>
              <option value="SERVER_DB">SERVER DB</option>
              <option value="SERVER_STACK">SERVER STACK</option>
            </select>
          </div>
          <div class="form-group">
            <label for="status" class="col-form-label">Status:</label>
            <select class="form-control form-select form-select-lg mb-3" id="status" aria-label=".form-select-lg">
              <option selected>Select Status</option>
              <option value="UP">UP</option>
              <option value="DOWN">DOWN</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">Submit</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>